# 《Linux命令速查手册》

---

## shell的作业控制

| 命令            | 作用                               |
| --------------- | ---------------------------------- |
| jobs            | 列出作业                           |
| &               | 在后台运行作业                     |
| Ctrl+Z          | 挂起当前（前台）作业               |
| suspend         | 挂起shell的执行                    |
| fg [%jobnumber] | 撤销作业的挂起操作，让它在前台运行 |
| bg [%jobnumber] | 让挂起的作业在后台运行             |

---

## 文件基本操作

| 命令 | 作用                     |
| ---- | ------------------------ |
| ls   | 列出目录中的文件         |
| cp   | 复制文件                 |
| mv   | 重命名（“移动”）文件     |
| rm   | 删除（“移除”）文件       |
| ln   | 创建文件链接（替代名称） |

---

## ls

格式：`ls [option] [files]`

作用：列出文件和目录的属性

常用选项：

-a	列出所有的文件，包括文件名以句点开头的文件

-l	长列表，包括文件属性。添加-h选项后，输出文件大小时，将以千字节、兆字节和千兆字节为单位，而不是以字节为单位

-G	在长列表中，不输出文件的组所有权

-F	用意义明确的符号修饰文件名称，从而指示文件的类型。通常，文件名后面附加“/”表示“可执行文件”，附加“@”表示符号链接，附加“|”表示命名管道，附加“=”表示套接字。这些只是对人类有提示作用的视觉标识，而不是文件名的一部分。

-S	按大小对文件排序

-t	按照最近修改时间对文件进行排序

-r	反序

-R	显示目录时，递归显示其内容

-d	显示目录时，不显示其内容，仅显示目录本身的信息

---

## cp

格式：`cp [options] files (file | directory)`

作用：复制文件

常用选项：

-p	不仅复制文件内容，同时复制文件权限、时间戳，同时如果你具有足够的权限的话，还可以复制其属主和用户组（通常，这些副本将归你所有，以当下时间作为时间戳，相应的权限则是通过将umask应用于原始权限来设置的）

-a	递归复制目录的层次结构，保留所有的文件属性和链接

-r	递归复制目录的层次结构。该选项不保留文件的属性，如权限和时间戳，但是会保留符号链接

-i	交互模式。在覆盖目标文件之前会进行询问

-f	强制复制。如果目标文件存在的话，则无条件覆盖

---

## mv

格式：`mv [options] source target`

作用：对文件进行重命名，或将文件或目录移动到目标目录中

常用选项：

-i	交互模式。在覆盖目标文件之前进行询问

-f	强制移动。如果目标文件存在的话，则无条件覆盖

---

## rm

格式：`rm [options] files | directories`

作用：删除文件或递归删除目录

常用选项：

-i	交互模式。在删除每个文件之前都会进行询问

-f	强制删除，忽略任何错误或警告

-r	递归删除目录及其内容。该选项请谨慎使用，特别是与-f选项结合使用时尤其如此，因为这会删除所有的文件

---

## ln

格式：`ln [options] source target`

作用：创建链接

常用选项：

-s	创建一个符号链接而非硬链接

-i	交互模式。在覆盖目标文件之前进行询问

-f	强制链接。如果目标文件存在的话，则无条件覆盖

-d	创建指向目录的硬链接（仅限于超级用户）

注：`readlink linkname`命令用于查找符号链接指向的位置，而当符号链接指向其他符号链接时，要想找出整个链接最终指向的位置，请使用`readlink -f`命令

---

## 目录操作

| 命令     | 作用                             |
| -------- | -------------------------------- |
| cd       | 更改当前目录                     |
| pwd      | 打印当前目录的名称               |
| basename | 打印文件路径的最后部分           |
| dirname  | 打印文件路径，其中不包括最后部分 |
| mkdir    | 创建目录                         |
| rmdir    | 删除空目录                       |
| rm -r    | 删除非空目录及其内容             |

---

## cd

格式：`cd [directory]`

作用：设置当前的工作目录

注：如果不提供具体目录的话，默认切换到主目录

---

## pwd

格式：`pwd`

作用：输出当前工作目录的绝对路径

---

## basename

格式：`basename path [extension]`

作用：输出文件路径中的最后面部分

注：如果提供了可选的扩展名，那么结果中的扩展名也同时删除

---

## dirname

格式：`dirname path`

作用：输出文件路径（同时删除其最后面的部分）

注：dirname命令不会改变当前的工作目录。它只是处理并输出一个字符串，与basename类似

---

## mkdir

格式：`mkdir [options] directories`

作用：创建一个或多个目录

常用选项：

-p	给定目录路径（而非简单的目录名），自动创建必需的父目录

-m	创建具有给定权限的目录，如：`mkdir -m 0755 publicdir`，默认情况下，赋予的权限是由shell的umask来控制的

---

## rmdir

格式：`rmdir [options] directories`

作用：删除一个或多个空目录

常用选项：

-p	如果提供了目录路径（而非简单的目录名称），那么不但可以自动删除指定的目录，还可以自动删除指定的父目录

注：要删除非空目录及其内容，请谨慎使用rm -r目录。如果使用rm -ri命令的话，可以进行交互式删除，如果使用rm -rf命令的话，则会直接删除而不提供任何错误信息，同时也不要求进行确认

---

## 查看文件

| 命令    | 作用                               |
| ------- | ---------------------------------- |
| cat     | 查看完整的文件                     |
| less    | 逐页查看文本文件                   |
| nl      | 利用行编号查看文本文件             |
| head    | 查看文本文件的第一行               |
| tail    | 查看文本文件的最后一行             |
| strings | 显示嵌入二进制文件的文本           |
| od      | 以八进制（或其他格式）格式查看数据 |

---

## cat

格式：`cat [options] [files]`

作用：将文件输出至标准输出，或将一组文件发送到shell管道

常用选项：

-T	将制表符输出为I

-E	将换行符输出为$

-v	以人类可读的格式打印其他非打印字符

-n	为每行添加行号

-b	为非空白行添加行号

-s	将连续的空白压缩为一个空白行

---

## less

格式：`less [options] [files]`

作用：以每次一页的方式查看文本

常用选项：

-c	在显示下一页之前清除屏幕。这样可以避免滚屏，并且看起来更加舒适

-m	输出更详细的提示，并给出显示进度

-N	显示行号

-r	按照字面形式显示控制字符；通常less会将控制字符转换为人类可读的格式

-s	将多个相邻的空白行压缩成单个空白行

-S	当某行内容很长时，截短为与屏幕等宽

---

## nl

格式：`nl [options] [files]`

作用：将文件复制到标准输出，并添加行号

常用选项：

-b [a|t|n|p R]	在所有行（a）、非空白行（t）或包含正则表达式R的行前面添加行号。而n表示不给任何一行编号（默认值=a）

-v N		从整数N开始编号（默认值=1）

-i N		每一行递增N，例如，你可以仅使用奇数（-i 2）或偶数（-v 2 -i 2）（默认值=1）

-n [ln|rn|rz]	将编号格式化为左对齐（ln）、右对齐（rn）或带前导零（rz）的右对齐（默认值=ln）

-w N		将数字的宽度强制为N列（缺省值=6）

-s S		在行号和文本之间插入字符串S（默认值=Tab）

---

## head

格式：`head [options] [files]`

作用：输出文件前10行，或预览命令管道输出的前几行内容

常用选项：

-n N		打印前N行，而不是前10行

-N		作用与-n N相同

-c N		输出文件的前N个字节

-q		安静模式，当处理一个以上的文件时，不在每一个文件之上打印一个横幅。通常，head命令会输出包含文件名的横幅

---

## tail

格式：`tail [options] [files]`

作用：输出文件的最后10行，并执行其他操作

常用选项：

-n N		输出最后N行，而不是最后10行

-N		作用与-n N相同

-n +N	输出除了第N行之外的所有行

-c N		输出文件的最后N个字节

-f		打开文件，每当文件附加新的行时，输出它们。这个功能是非常有用的。如果文件不存在，但你想等到它出现的话，可以添加--retry选项

-q		安静模式，当处理的文件多于一个的时候，不给每个文件都输出一个横幅。通常情况下，tail都会输出一个包含文件名的横幅

---

## strings

格式：`strings [options] [files]`

作用：提取二进制文件中的可读文本，并将其显示在标准输出中

常用选项：

-n length		仅显示长度大于length（默认值为4）的字符串

---

## od

格式：`od [options] [files]`

作用：查看二进制文件

常用选项：

-N B		仅显示每个文件的前B字节，可以用十进制、十六进制（通过前缀0x或0X）、512字节块（通过附加b）、千字节（通过附加k）或兆字节（通过附加m）来指定（默认情况下会显示整个文件）

-j B		从每个文件的第B+1字节处开始输出，可接受的格式与-N选项相同（缺省值=0）

-w [B]	每行显示B字节，可接受的格式与-N选项相同。如果只是使用-w本身的话，就等同于-w 32（默认值=16）

-s [B]	将每行字节分为B字节为单位的序列，由空格分隔；可接受的格式与-N选项相同。如果只是使用-s本身的话，就等同于-s 3（默认值=2）

-A(d|o|x|n)	显示最左列，可以以十进制（d）、八进制（o）、十六进制（x）或全部（n）为单位（默认值=o）

-t(a|c)[z]		以字符格式显示输出，非字母数字字符输出为转义序列（c）或名称（a）

-t(d|o|u|x)[z]	以整数格式显示输出，可以使用八进制（o）、有符号十进制（d）、无符号十进制（u）、十六进制（x）

注：将z附加到-t选项的话，会在输出的右侧输出一个新列，用来显示每行中的可打印字符

---

## 文件属性

| 命令   | 说明                         |
| ------ | ---------------------------- |
| stat   | 显示文件和目录的属性         |
| wc     | 统计字节数、字数和行数       |
| du     | 显示文件和目录的磁盘使用情况 |
| file   | 识别（猜测）文件的类型       |
| touch  | 更改文件和目录的时间戳       |
| chown  | 更改文件和目录的属主         |
| chgrp  | 更改文件和目录所属的用户组   |
| chmod  | 更改文件和目录的保护模式     |
| umask  | 为新的文件和目录设置默认模式 |
| chattr | 更改文件和目录的扩展属性     |
| lsattr | 列出文件或目录的扩展属性     |

---

## stat

格式：`stat [options] files`

作用：显示文件（默认情况下）或文件系统（-f选项）的重要属性

常用选项：

-L	跟踪符号链接，并报告它们指向的文件

-f	显示文件所在文件系统的信息，而不是文件本身的信息

-t	简洁模式，单行输出所有信息

---

## wc

格式：`wc [options] [files]`

作用：输出文本文件中的字节数、字数和行数

常用选项：

-l	仅输出行数

-w	仅输出字数

-c	仅输出字节数

-L	找出每个文件中最长的行，并以字节为单位输出该行的长度

---

## du

格式：`du [options] [files | directories]`

作用：输出文件或目录所占用的磁盘空间（以块为单位）

常用选项：

-b	输出以字节为单位的大小

-k	输出以千字节为单位的大小

-m	输出以兆字节为单位的大小

-B N		根据所定义块为单位来显示大小，其中1个块=N字节（默认值=1024）

-h -H	以人类可读的单位进行输出。-h选项使用1024的幂，而-H则使用1000的幂

-c	在最后一行输出总数。这是输出目录大小时的默认设置，但是用于特定文件的时候，如果需要统计总大小的话，请使用-c选项

-L	跟踪符号链接并显示它指向的文件的大小

-s	仅输出总大小

---

## file

格式：`file [options] files`

作用：输出文件的类型

常用选项：

-b	输出时忽略左边部分的文件名

-i	输出文件的MIME类型，而不是常规的文件信息

-f name_file	从给定的name_file文件中读取文件名，逐行读取，每行一个文件名，并报告其类型。之后，以常规命令行的方式处理文件名

-L	跟踪符号链接，然后报告目标文件的类型，而不是显示链接的类型

-z	如果文件被压缩，则检查未压缩的内容以确定文件类型，而非显示“压缩数据”

---

## touch

格式：`touch [options] files`

作用：修改文件的两个时间戳（修改时间、访问时间）；创建空文件

常用选项：

-a	仅修改访问时间

-m	仅更改修改时间

-c	如果文件不存在，不要创建它

-d timestamp	设置文件的时间戳

-t timestamp	一种设置时间戳的高级方式，格式为[[CC]YY] MMDDhhmm [.ss]

---

## chown

格式：`chown [options] user_spec files`

作用：设置文件和目录的所有权

**user_spec**参数可以是：

- 现有用户名（或任何数字形式的用户ID），以便设置属主
- 现有用户名（或任何数字形式的用户ID），作为可选项可以跟冒号和现有用户组名（或任何数字形式的用户组ID），以便设置属主和用户组
- 现有的用户名（或任何数字形式的用户ID）后面跟冒号，来设置属主，并将用户组设置为调用用户的登录组
- 位于冒号之后的现有用户组名（或任何数字形式的组ID），仅设置用户组
- --reference=file，将属主和用户组设置为给定的另一个文件的属主和用户组

常用选项：

--dereference	跟踪符号链接并对其指向的文件进行操作

-R	递归更改目录层次结构中的相应权限

---

## chgrp

格式：`chgrp [options] group_spec files`

作用：设置文件和目录的属组

**group_spec**参数可以是以下任何一种：

- 用户组名或数字形式的用户组ID
- --reference=file，将属组设置为另一给定文件的属组

常用选项：

--dereference	跟踪符号链接，并对其指向的文件进行操作

-R	递归更改目录层次结构中的所有权

---

## chmod

格式：`chmod [options] permissions files`

作用：设置文件和目录的访问权限

**permissions**参数可以采用三种不同的形式：

- --reference=file，设置与其他给定文件相同的权限
- 最多四位数字的八进制数，用于指定文件的绝对权限
- 一个或多个字符串，指定绝对权限或相对权限（即相对于该文件的现有权限）

常用选项：

-R	递归更改目录层次结构中的所有权

---

## umask

格式：`umask [options] [mask]`

作用：设置或显示创建文件和目录时的默认模式，赋予自己、用户组和所有人相应的读、写和/或执行权限

常用选项：

-S	以更直观的形式显示默认模式

---

## chattr

格式：`chattr [options] [+ - =] attributes [files]`

作用：设置或更改扩展属性（仅限ext文件系统）

| 属性 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| a    | 只能进行追加：只能向文件中添加数据，而不能编辑数据，只有root才能设定这个属性 |
| A    | 不访问时间戳：对这个文件进行访问时不会更新其访问时间戳（atime） |
| c    | 压缩：数据在写入时自动压缩，在读取时自动解压缩               |
| d    | 不转储：在进行备份时，告诉转储程序忽略此项                   |
| i    | 不可变：不允许对该文件进行更改或删除（仅限root使用该属性）   |
| j    | 文件在写入时会先被记录在journal中（仅限ext3系统）            |
| s    | 安全删除：删除时，用零覆盖文件中的所有数据                   |
| S    | 同步更新：更改将立即写入磁盘                                 |
| u    | 不可删除：该文件不允许执行删除操作                           |

常用选项：

-R	递归处理目录

---

## lsattr

格式：`lsattr [options] files`

作用：显示扩展属性

注：如果没有指定文件的话，lsattr会输出当前目录中所有文件的属性

常用选项：

-R	递归处理目录

-a	列出所有的文件，包括以点号开头的文件

-d	如果显示目录的话，不显示其内容，仅显示目录本身

---

## 文件的定位

| 命令    | 作用                                       |
| ------- | ------------------------------------------ |
| find    | 在目录层次结构中查找文件                   |
| xargs   | 处理找到的文件列表（以及其他功能）         |
| locate  | 创建一个文件索引，然后通过索引搜索字符串   |
| which   | 在搜索路径中查找可执行文件（命令）         |
| type    | 查找搜索路径中的可执行文件（bash内置命令） |
| whereis | 查找可执行文件、文档和源文件               |

---

## find

格式：`find [directories] [expression]`

作用：在一个或多个目录（及其递归子目录）中搜索符合特定条件的文件

常用选项：

-name|-path|-lname pattern	查找对象的文件名称（-name）、路径名（-path）或符号链接目标文件（-lname）必须匹配这里给出的shell模式，其中可以含有shell通配符*，?和[]（必须对通配符进行转义处理，以便让shell忽略这些通配符本身，而按照通配符所指代的内容进行查找）。注意，这里的路径是相对于正在搜索的目录树的相对路径

-iname|-ipath|-ilname pattern		分别对应于前面三个，不区分大小写

-regex regexp	路径（相对于正在搜索的目录树）必须与给定的正则表达式相匹配

-type t	仅查找类型为t的文件。这些类型包括普通文件（f）、目录（d）、符号链接（l）、块设备（b）、字符设备（c）、命名管道（p）和套接字（s）

-atime|-ctime|-mtime N		以N*24小时为参考，最后一次访问（-atime）、最后一次修改（-mtime）或发生状态变化（-ctime）的文件。此外，+N表示“大于N”，而-N表示“小于N”

-amin|-cmin|-mmin N	以N分钟为参考，最后一次访问（-amin）、最后一次修改（-mmin）或发生状态变化（-cmin）的文件。此外，+N表示“大于N”，而-N表示“小于N”

-anewer|-cnewer|-newer other_file		访问时间（-anewer）、修改时间（-newer）或者状态变化时间（-cnewer）晚于other_file的相应时间的那些文件

-maxdepth|-mindepth N	在正在搜索的目录树中查找文件时，最少（-mindepth）或最多（-maxdepth）搜索N层

-follow	如果遇到符号链接，就跟踪链接所指的文件

-depth	继续使用深度优先搜索：在对目录本身进行操作之前，首先通过递归方式彻底搜索目录中的内容

-xdev	将搜索范围限制为单个文件系统（即不允许跨越设备边界）

-size N[bckw]	查找大小为N的文件，其单位可以是块（b），单字节字符（c），千字节（k）或双字节的字（w）。+N表示“大于N”，-N表示“小于N”

-empty	查找大小为零的普通文件或目录

-user name	查找属主为给定用户的文件

-group name		查找属组为给定用户组的文件

-perm mode		查找权限与给定模式相同的文件。可以使用-mode来检查所有给定的位是否被设置，或者使用+mode来检查给定的位是否被设置



*此外，可以使用**运算符**对表达式的组成部分进行分组和求反：*

expression1 -a expression2：与运算，该选项为默认值

expression1 -o expression2：或运算

! expression或-not expression：对表达式的值进行求反

(expression)：优先级标记

expression1,expression2：计算两个表达式的值，然后返回第二个表达式的值



指定搜索条件后，就可以让find命令在符合条件的文件上执行以下操作。

常用选项：

-print	只需输出相对于搜索目录的相对路径

-printf string		输出给定的字符串，可以用C库函数printf()的方式对其进行替换

-printO	类似于-print，区别在于不是使用换行符分隔每行输出，而使用null（ASCII 0）字符。通常在将搜索结果以管道方式传递给另一个程序，并且文件名列表可能含有空格时使用。当然，这要求接收程序必须能够读取并解析这些以null字符分隔的行

-exec cmd;	调用给定的shell命令cmd。需要注意的是，一定要对shell元字符转义处理，包括最后面的分号，因此它们不会在命令行中立即进行计算。此外，符号“{}”（务必加上引号或进行转义处理）代表所找的文件的路径，如：`find . -exec ls '{}' \;`

-ok cmd		与-exec选项的作用类似，区别是将在调用每个命令之前提示用户

-ls	对文件执行ls -dils命令

---

## xargs



